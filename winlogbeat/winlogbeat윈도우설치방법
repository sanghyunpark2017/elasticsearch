
#######################
# 노트
#######################

#윈도우2003은 EVENT_ID를 지원하지 않음
#따라서 필드구조가 다르기 때문에 별도에 인덱스를 사용해야 하고,
 이는 인덱스가 윈도우2003용과 윈도우2008 이상 용으로 구분되어야 함
#logstash 2대가 필요함



#######################
# 설치 가이드
#######################


1) 사전작업(대표서버 1대)
-다운로드 : https://www.elastic.co/downloads/beats/winlogbeat
-Windows 32bit, 64bit 택 1

3) winlogbeat.yml 파일 설정변경https://github.com/sanghyunpark2017/ElasticSearch/tree/master/winlogbeat
>대표서버에서 압축풀고 설정 후 파일복사로 배포함
C:\Program Files\Winlogbeat\winlogbeat.yml


4) 파워쉘시작 (마우스 오른쪽 클릭 -> Administrator 권한으로 실행)
윈도우2008 : 시작 -> 관리도구 -> Windows PowerShell Modules
윈도우2012 : 시작 -> Windows PowerShell


5) 설치
에서 install(무중단)
>윈도우2008 이상은 파워쉘이 내장되어 있어 그냥 사용
>윈도우2003은 파워쉘 설치 및 재부팅하여 파워쉘 적용해야함

#PS콘솔에서 명령어 실행
cd "C:\Program Files\Winlogbeat"
.\install-service-winlogbeat.ps1


.\uninstall-service-winlogbeat.ps1




5) 윈도우 서비스 등록 확인
>서비스명 "winlogbeat"

6) 서비스 시작

7) 로그확인
c:\programdata\winlogbeat\logs

#######################
# 윈도우2003(32bit)
#######################

1) .NET Framework 2.0 SP1 인스톨 (재부팅)

2) 파워쉘 2.0 인스톨 (재부팅 없음)

3) Program Files 폴더 밑에 "Winlogbeat2003" 폴더 가져다 놓고 

3) 시작>프로그램>보조프로그램>Windows PowerShell>Windows PowerShell 실행

cd "C:\Program Files\Winlogbeat2003"

cd "C:\Program Files\Winlogbeat"
PowerShell.exe -ExecutionPolicy UnRestricted -File .\install-service-winlogbeat.ps1


cd "C:\Program Files\Winlogbeat2003"
PowerShell.exe -ExecutionPolicy UnRestricted -File .\uninstall-service-winlogbeat.ps1

#윈도우2003은 Event_ID를 지원하지 않음
https://www.elastic.co/guide/en/beats/winlogbeat/master/configuration-winlogbeat-options.html#_literal_event_logs_event_id_literal

event_logs.event_id
This option is only available on operating systems supporting the Windows Event Log API
(Microsoft Windows Vista and newer).
































